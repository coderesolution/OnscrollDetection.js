{"version":3,"file":"OnscrollDetection.umd.js","sources":["../src/OnscrollDetection.js"],"sourcesContent":["class OnscrollDetection {\n\tconstructor(options = {}) {\n\t\tthis.elements = options.elements || '[data-onscroll]';\n\t\tthis.init();\n\t}\n\n\tinit() {\n\n\t\t/**\n\t\t * Loop each element\n\t\t */\n\t\tgsap.utils.toArray(this.elements).forEach((oElement, iIndex) => {\n\t\t\t/* Defaults */\n\t\t\tlet oTrigger,\n\t\t\t\tiOffset = null,\n\t\t\t\tiDistance = null,\n\t\t\t\tiStart = 'top bottom',\n\t\t\t\tiBottom = 'bottom top';\n\n\t\t\t/* Assign scroll trigger to element */\n\t\t\toTrigger = oElement;\n\n\t\t\t/* Determine custom from->to properties */\n\t\t\tlet aAnimateFrom = [],\n\t\t\t\taAnimateTo = [];\n\n\t\t\tif (oElement.hasAttribute('data-onscroll-from')) {\n\t\t\t\taAnimateFrom = JSON.parse(oElement.dataset.onscrollFrom);\n\t\t\t}\n\n\t\t\tif (oElement.hasAttribute('data-onscroll-to')) {\n\t\t\t\taAnimateTo = JSON.parse(oElement.dataset.onscrollTo);\n\t\t\t}\n\n\t\t\t/* Set offset */\n\t\t\tif (oElement.hasAttribute('data-onscroll-offset')) {\n\t\t\t\tiOffset = parseInt(oElement.dataset.onscrollOffset);\n\t\t\t}\n\n\t\t\t/* Set distance */\n\t\t\tif (oElement.hasAttribute('data-onscroll-distance')) {\n\t\t\t\tiDistance = parseInt(oElement.dataset.onscrollDistance);\n\t\t\t}\n\n\t\t\t/* Get speed */\n\t\t\tfunction fnGetSpeed() {\n\t\t\t\treturn (\n\t\t\t\t\t(1 - parseFloat(oElement.dataset.onscrollSpeed)) *\n\t\t\t\t\t(ScrollTrigger.maxScroll(window) -\n\t\t\t\t\t\t(this.scrollTrigger ? this.scrollTrigger.start : 0))\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t/* Determine auto */\n\t\t\tif (oElement.hasAttribute('data-onscroll-auto')) {\n\t\t\t\toTrigger = oElement.parentElement;\n\t\t\t\tiDistance =\n\t\t\t\t\toElement.offsetHeight - oElement.parentElement.offsetHeight;\n\t\t\t}\n\n\t\t\t/* Get offset */\n\t\t\tfunction fnGetOffset() {\n\t\t\t\tif (oElement.hasAttribute('data-onscroll-reverse')) {\n\t\t\t\t\treturn iOffset ? +iOffset : null;\n\t\t\t\t} else {\n\t\t\t\t\treturn iOffset ? -iOffset : null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Get distance */\n\t\t\tfunction fnGetDistance() {\n\t\t\t\tif (oElement.hasAttribute('data-onscroll-auto')) {\n\t\t\t\t\treturn oElement.hasAttribute('data-onscroll-reverse')\n\t\t\t\t\t\t? -iDistance\n\t\t\t\t\t\t: iDistance;\n\t\t\t\t} else {\n\t\t\t\t\treturn oElement.hasAttribute('data-onscroll-reverse')\n\t\t\t\t\t\t? -iDistance\n\t\t\t\t\t\t: iDistance;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Apply animations */\n\t\t\tgsap.fromTo(\n\t\t\t\toElement,\n\t\t\t\t{\n\t\t\t\t\t...aAnimateFrom,\n\t\t\t\t\tbottom:\n\t\t\t\t\t\toElement.hasAttribute('data-onscroll-auto') &&\n\t\t\t\t\t\toElement.hasAttribute('data-onscroll-reverse')\n\t\t\t\t\t\t\t? 'auto'\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\ttop:\n\t\t\t\t\t\toElement.hasAttribute('data-onscroll-auto') &&\n\t\t\t\t\t\t!oElement.hasAttribute('data-onscroll-reverse')\n\t\t\t\t\t\t\t? 'auto'\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\tx:\n\t\t\t\t\t\toElement.hasAttribute('data-onscroll-direction') &&\n\t\t\t\t\t\t(oElement.dataset.onscrollDirection === 'x' ||\n\t\t\t\t\t\t\toElement.dataset.onscrollDirection === 'xy')\n\t\t\t\t\t\t\t? fnGetOffset()\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\ty:\n\t\t\t\t\t\t!oElement.hasAttribute('data-onscroll-direction') ||\n\t\t\t\t\t\t(oElement.hasAttribute('data-onscroll-direction') &&\n\t\t\t\t\t\t\t(oElement.dataset.onscrollDirection === 'y' ||\n\t\t\t\t\t\t\t\toElement.dataset.onscrollDirection === 'xy'))\n\t\t\t\t\t\t\t? fnGetOffset()\n\t\t\t\t\t\t\t: null,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t...aAnimateTo,\n\t\t\t\t\tx: () => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toElement.hasAttribute('data-onscroll-direction') &&\n\t\t\t\t\t\t\t(oElement.dataset.onscrollDirection === 'x' ||\n\t\t\t\t\t\t\t\toElement.dataset.onscrollDirection === 'xy')\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (oElement.hasAttribute('data-onscroll-speed')) {\n\t\t\t\t\t\t\t\treturn fnGetSpeed();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn fnGetDistance();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ty: () => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!oElement.hasAttribute('data-onscroll-direction') ||\n\t\t\t\t\t\t\t(oElement.hasAttribute('data-onscroll-direction') &&\n\t\t\t\t\t\t\t\t(oElement.dataset.onscrollDirection === 'y' ||\n\t\t\t\t\t\t\t\t\toElement.dataset.onscrollDirection ===\n\t\t\t\t\t\t\t\t\t\t'xy'))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (oElement.hasAttribute('data-onscroll-speed')) {\n\t\t\t\t\t\t\t\treturn fnGetSpeed();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn fnGetDistance();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tease: 'none',\n\t\t\t\t\tscrollTrigger: {\n\t\t\t\t\t\ttrigger: oElement.dataset.onscrollTrigger\n\t\t\t\t\t\t\t? document.querySelector(\n\t\t\t\t\t\t\t\t\toElement.dataset.onscrollTrigger\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: oTrigger,\n\t\t\t\t\t\tstart: oElement.dataset.onscrollStart\n\t\t\t\t\t\t\t? oElement.dataset.onscrollStart\n\t\t\t\t\t\t\t: iStart,\n\t\t\t\t\t\tend: oElement.dataset.onscrollEnd\n\t\t\t\t\t\t\t? oElement.dataset.onscrollEnd\n\t\t\t\t\t\t\t: iBottom,\n\t\t\t\t\t\tinvalidateOnRefresh: true,\n\t\t\t\t\t\tscrub: true,\n\t\t\t\t\t\tmarkers: oElement.hasAttribute('data-onscroll-debug')\n\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t: false,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t/* Debug */\n\t\t\tif (oElement.hasAttribute('data-onscroll-debug')) {\n\t\t\t\tconsole.group(\n\t\t\t\t\t`uOnscrollDetection() debug instance (${iIndex + 1})`\n\t\t\t\t);\n\t\t\t\tconsole.log({\n\t\t\t\t\telement: oElement,\n\t\t\t\t\tauto: oElement.hasAttribute('data-onscroll-auto')\n\t\t\t\t\t\t? true\n\t\t\t\t\t\t: false,\n\t\t\t\t\toffset: iOffset,\n\t\t\t\t\tdistance: iDistance,\n\t\t\t\t\tspeed: oElement.hasAttribute('data-onscroll-speed')\n\t\t\t\t\t\t? oElement.dataset.onscrollSpeed +\n\t\t\t\t\t\t  ' calculated at ' +\n\t\t\t\t\t\t  (1 - parseFloat(oElement.dataset.onscrollSpeed)) *\n\t\t\t\t\t\t\t\t(ScrollTrigger.maxScroll(window) -\n\t\t\t\t\t\t\t\t\t(this.scrollTrigger\n\t\t\t\t\t\t\t\t\t\t? this.scrollTrigger.start\n\t\t\t\t\t\t\t\t\t\t: 0))\n\t\t\t\t\t\t: null,\n\t\t\t\t\tdirection: oElement.hasAttribute('data-onscroll-direction')\n\t\t\t\t\t\t? oElement.dataset.onscrollDirection\n\t\t\t\t\t\t: 'y',\n\t\t\t\t\treverse: oElement.hasAttribute('data-onscroll-reverse')\n\t\t\t\t\t\t? true\n\t\t\t\t\t\t: false,\n\t\t\t\t\ttrigger: oTrigger,\n\t\t\t\t\ttriggerStart: iStart,\n\t\t\t\t\ttriggerEnd: iBottom,\n\t\t\t\t\tanimateFrom: oElement.hasAttribute('data-onscroll-to')\n\t\t\t\t\t\t? JSON.parse(oElement.dataset.onscrollFrom)\n\t\t\t\t\t\t: null,\n\t\t\t\t\tanimateTo: oElement.hasAttribute('data-onscroll-to')\n\t\t\t\t\t\t? JSON.parse(oElement.dataset.onscrollTo)\n\t\t\t\t\t\t: null,\n\t\t\t\t});\n\t\t\t\tconsole.groupEnd();\n\t\t\t}\n\t\t});\n\t}\n}\n\n// Export the OnscrollDetection class\nexport default OnscrollDetection;\n"],"names":["OnscrollDetection","options","this","elements","init","prototype","_this","gsap","utils","toArray","forEach","oElement","iIndex","oTrigger","iOffset","iDistance","iStart","iBottom","aAnimateFrom","aAnimateTo","fnGetSpeed","parseFloat","dataset","onscrollSpeed","ScrollTrigger","maxScroll","window","scrollTrigger","start","fnGetOffset","hasAttribute","fnGetDistance","JSON","parse","onscrollFrom","onscrollTo","parseInt","onscrollOffset","onscrollDistance","parentElement","offsetHeight","fromTo","_extends","bottom","top","x","onscrollDirection","y","ease","trigger","onscrollTrigger","document","querySelector","onscrollStart","end","onscrollEnd","invalidateOnRefresh","scrub","markers","console","group","log","element","auto","offset","distance","speed","direction","reverse","triggerStart","triggerEnd","animateFrom","animateTo","groupEnd"],"mappings":"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"}