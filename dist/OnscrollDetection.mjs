function t(){return t=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},t.apply(this,arguments)}var s=/*#__PURE__*/function(){function s(s){void 0===s&&(s={}),this.elements=s.elements||"[data-onscroll]",this.screen=s.screen||"(min-width: 1025px)",this.triggers=new Map,this.classDefaults=t({scrollingClass:"is-scrolling",scrolledClass:"has-scrolled",stickyClass:"is-sticky",stuckClass:"has-stuck"},s.classDefaults),this.init()}var e=s.prototype;return e.init=function(){var t=this;gsap.utils.toArray(this.elements).forEach(function(s,e){var r=t.getTrigger(s),i=t.getScreen(s),a=gsap.matchMedia(),o=t.getFromProperties(s,e),n=t.getToProperties(s,e,r);a.add(i,function(){var e=gsap.fromTo(s,o,n);t.triggers.set(e.scrollTrigger,{element:s,fromProperties:o,toProperties:n,gsapAnimation:e})}),t.debugMode(s,e)})},e.getTrigger=function(t){return this.hasAttributes(t,["data-onscroll-auto"])&&!t.hasAttribute("data-onscroll-trigger")?t.parentElement:t.hasAttribute("data-onscroll-trigger")?document.querySelector(t.dataset.onscrollTrigger)||(console.error("Element specified by data-onscroll-trigger not found: "+t.dataset.onscrollTrigger),t):t},e.getScreen=function(t){return t.hasAttribute("data-onscroll-screen")?t.dataset.onscrollScreen:this.screen},e.getFromProperties=function(s,e){var r=this.getAnimateFrom(s),i=this.getOffsetAndDistance(s).offset;return t({},r,{bottom:this.hasAttributes(s,["data-onscroll-auto","data-onscroll-reverse"])?"auto":null,top:this.hasAttributes(s,["data-onscroll-auto"])&&!this.hasAttributes(s,["data-onscroll-reverse"])?"auto":null,x:!this.hasAttributes(s,["data-onscroll-direction"])||"x"!==this.getDirection(s)&&"xy"!==this.getDirection(s)?null:i,y:!this.hasAttributes(s,["data-onscroll-direction"])||this.hasAttributes(s,["data-onscroll-direction"])&&("y"===this.getDirection(s)||"xy"===this.getDirection(s))?i:null})},e.getToProperties=function(s,e,r){var i=this,a=this.getAnimateTo(s),o=this.getStickyProperties(s),n=this.hasAttributes(s,["data-onscroll-sticky"]);return t({},a,{x:this.getX(s),y:this.getY(s),ease:"none",scrollTrigger:{trigger:n?s:r,start:this.getStart(s),end:this.getEnd(s),invalidateOnRefresh:!0,pin:o.pin,pinSpacing:o.pinSpacing,scrub:this.getScrub(s),markers:this.hasAttributes(s,["data-onscroll-debug"]),onEnter:function(){s.classList.add(i.classDefaults.scrollingClass,i.classDefaults.scrolledClass),n&&s.classList.add(i.classDefaults.stickyClass,i.classDefaults.stuckClass)},onLeave:function(){s.classList.remove(i.classDefaults.scrollingClass),n&&s.classList.remove(i.classDefaults.stickyClass)},onEnterBack:function(){s.classList.add(i.classDefaults.scrollingClass),n&&s.classList.add(i.classDefaults.stickyClass)},onLeaveBack:function(){s.classList.remove(i.classDefaults.scrollingClass),n&&s.classList.remove(i.classDefaults.stickyClass)}}})},e.getStickyProperties=function(t){return t.hasAttribute("data-onscroll-sticky")?{pin:!0,pinSpacing:!1}:{pin:!1,pinSpacing:!0}},e.hasAttributes=function(t,s){return s.every(function(s){return t.hasAttribute(s)})},e.getAnimateFrom=function(t){return t.hasAttribute("data-onscroll-from")?JSON.parse(t.dataset.onscrollFrom):[]},e.getAnimateTo=function(t){return t.hasAttribute("data-onscroll-to")?JSON.parse(t.dataset.onscrollTo):[]},e.getOffset=function(t){return t.hasAttribute("data-onscroll-offset")?parseInt(t.dataset.onscrollOffset):null},e.getDirection=function(t){return t.dataset.onscrollDirection},e.getX=function(t){return t.hasAttribute("data-onscroll-sticky")?null:!this.hasAttributes(t,["data-onscroll-direction"])||"x"!==this.getDirection(t)&&"xy"!==this.getDirection(t)?void 0:this.getDistanceOrSpeed(t)},e.getY=function(t){return t.hasAttribute("data-onscroll-sticky")?null:!this.hasAttributes(t,["data-onscroll-direction"])||this.hasAttributes(t,["data-onscroll-direction"])&&("y"===this.getDirection(t)||"xy"===this.getDirection(t))?this.getDistanceOrSpeed(t):void 0},e.getOffsetAndDistance=function(t){if(t.hasAttribute("data-onscroll-sticky"))return{offset:null,distance:null};var s=null,e=null,r=this.getTrigger(t).offsetHeight;if(t.hasAttribute("data-onscroll-offset")){var i=t.dataset.onscrollOffset.split(","),a=i[0],o=i[1];s=a.trim().endsWith("%")?parseFloat(a)/100*r:parseFloat(a),e=o.trim().endsWith("%")?parseFloat(o)/100*r:parseFloat(o)}return{offset:s,distance:e}},e.getDistanceOrSpeed=function(t){var s=this.getOffsetAndDistance(t).distance,e=window.innerHeight,r=t.dataset.onscrollSpeed,i=0;if(r&&r.includes(",")){var a=r.split(",").map(parseFloat);i=a[1]/100*e,(r=a[0])<0&&(i*=-1)}else r=parseFloat(r||"0");if(this.hasAttributes(t,["data-onscroll-auto"])){var o=this.getTrigger(t),n=Math.abs(o.offsetHeight-t.offsetHeight);return this.hasAttributes(t,["data-onscroll-reverse"])?-n:n}if(this.hasAttributes(t,["data-onscroll-speed"])){var l=r*t.offsetHeight+i;return this.hasAttributes(t,["data-onscroll-reverse"])?-l:l}if(null!==s)return this.hasAttributes(t,["data-onscroll-reverse"])?-s:s},e.getScrub=function(t){return!this.hasAttributes(t,["data-onscroll-delay"])||parseInt(t.dataset.onscrollDelay)},e.getStart=function(t){if(t.hasAttribute("data-onscroll-sticky")){var s=0;if(t.hasAttribute("data-onscroll-offset")){var e=t.dataset.onscrollOffset.split(",");s=parseFloat(e[0])}return(t.dataset.onscrollStart?t.dataset.onscrollStart:"top top")+"+="+s}return t.dataset.onscrollStart?t.dataset.onscrollStart:"top bottom"},e.getEnd=function(t){if(t.hasAttribute("data-onscroll-sticky")){var s=this.getTrigger(t),e=0;if(t.hasAttribute("data-onscroll-offset")){var r=t.dataset.onscrollOffset.split(",");e=parseFloat(r[1])}return"+="+(s.clientHeight-t.clientHeight-e)}if(this.hasAttributes(t,["data-onscroll-speed"])&&!t.hasAttribute("data-onscroll-end")){var i=this.getDistanceOrSpeed(t);return this.getOffsetAndDistance(t),"bottom"+(i>=0?"+=":"-=")+Math.abs(i)+" top"}return t.dataset.onscrollEnd?t.dataset.onscrollEnd:"bottom top"},e.debugMode=function(t,s){if(this.hasAttributes(t,["data-onscroll-debug"])){var e=this.getOffsetAndDistance(t).offset;console.group("OnscrollDetection() debug instance (#"+(s+1)+")"),console.log({element:t,trigger:this.getTrigger(t),triggerStart:this.getStart(t),triggerEnd:this.getEnd(t),auto:this.hasAttributes(t,["data-onscroll-auto"]),offsetBefore:e,offsetAfter:this.getDistanceOrSpeed(t),delay:this.getScrub(t),screen:this.getScreen(t),speed:this.hasAttributes(t,["data-onscroll-speed"])?t.dataset.onscrollSpeed+" calculated at "+(1-parseFloat(t.dataset.onscrollSpeed))*(ScrollTrigger.maxScroll(window)-(this.scrollTrigger?this.scrollTrigger.start:0)):null,direction:this.hasAttributes(t,["data-onscroll-direction"])?t.dataset.onscrollDirection:"y",reverse:this.hasAttributes(t,["data-onscroll-reverse"]),sticky:!!this.hasAttributes(t,["data-onscroll-sticky"]),animateFrom:this.getAnimateFrom(t),animateTo:this.getAnimateTo(t)}),console.groupEnd()}},e.refresh=function(){ScrollTrigger.refresh()},e.restart=function(){this.stop(),ScrollTrigger.getAll().forEach(function(t){return t.kill()}),ScrollTrigger.refresh(),this.init()},e.stop=function(t){if(void 0===t&&(t=null),t){var s=this.triggers.get(t);s&&(s.gsapAnimation.kill(),this.triggers.delete(t))}else this.triggers.forEach(function(t){t.gsapAnimation.kill()}),this.triggers.clear()},e.update=function(s,e,r){var i=this.triggers.get(s);if(i){i.gsapAnimation.kill();var a=gsap.fromTo(i.element,e,r);this.triggers.set(a.scrollTrigger,t({},i,{fromProperties:e,toProperties:r,gsapAnimation:a}))}},e.destroy=function(){this.stop(),this.triggers=null},s}();export{s as default};
//# sourceMappingURL=OnscrollDetection.mjs.map
