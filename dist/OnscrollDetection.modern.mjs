function t(){return t=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},t.apply(this,arguments)}class r{constructor(r={}){this.init=()=>{gsap.utils.toArray(this.elements).forEach((r,a)=>{let s,e=null,o=[],l=[],n=null,i=null,c="top bottom",d="bottom top",u=this.screen,h=gsap.matchMedia();s=r,r.hasAttribute("data-onscroll-screen")&&(u=r.dataset.onscrollScreen),r.hasAttribute("data-onscroll-from")&&(o=JSON.parse(r.dataset.onscrollFrom)),r.hasAttribute("data-onscroll-to")&&(l=JSON.parse(r.dataset.onscrollTo)),r.hasAttribute("data-onscroll-offset")&&(n=parseInt(r.dataset.onscrollOffset)),r.hasAttribute("data-onscroll-distance")&&(i=parseInt(r.dataset.onscrollDistance));const g=()=>(1-parseFloat(r.dataset.onscrollSpeed))*(ScrollTrigger.maxScroll(window)-(this.scrollTrigger?this.scrollTrigger.start:0));function p(){return r.hasAttribute("data-onscroll-reverse")?n?+n:null:n?-n:null}function b(){return r.hasAttribute("data-onscroll-auto"),r.hasAttribute("data-onscroll-reverse")?-i:i}r.hasAttribute("data-onscroll-auto")&&(s=r.parentElement,i=r.offsetHeight-r.parentElement.offsetHeight);const A=t({},o,{bottom:r.hasAttribute("data-onscroll-auto")&&r.hasAttribute("data-onscroll-reverse")?"auto":null,top:r.hasAttribute("data-onscroll-auto")&&!r.hasAttribute("data-onscroll-reverse")?"auto":null,x:!r.hasAttribute("data-onscroll-direction")||"x"!==r.dataset.onscrollDirection&&"xy"!==r.dataset.onscrollDirection?null:p(),y:!r.hasAttribute("data-onscroll-direction")||r.hasAttribute("data-onscroll-direction")&&("y"===r.dataset.onscrollDirection||"xy"===r.dataset.onscrollDirection)?p():null}),m=t({},l,{x:()=>{if(r.hasAttribute("data-onscroll-direction")&&("x"===r.dataset.onscrollDirection||"xy"===r.dataset.onscrollDirection))return r.hasAttribute("data-onscroll-speed")?g():b()},y:()=>{if(!r.hasAttribute("data-onscroll-direction")||r.hasAttribute("data-onscroll-direction")&&("y"===r.dataset.onscrollDirection||"xy"===r.dataset.onscrollDirection))return r.hasAttribute("data-onscroll-speed")?g():b()},ease:"none",scrollTrigger:{trigger:r.dataset.onscrollTrigger?document.querySelector(r.dataset.onscrollTrigger):s,start:r.dataset.onscrollStart?r.dataset.onscrollStart:c,end:r.dataset.onscrollEnd?r.dataset.onscrollEnd:d,invalidateOnRefresh:!0,scrub:!0,markers:!!r.hasAttribute("data-onscroll-debug")}});h.add(u,()=>{e=gsap.fromTo(r,A,m),this.scrollTriggers.push(e.scrollTrigger),this.animationsData.push({oElement:r,fromProperties:A,toProperties:m,gsapAnimation:e})}),r.hasAttribute("data-onscroll-debug")&&(console.group(`OnscrollDetection() debug instance (${a+1})`),console.log({element:r,auto:!!r.hasAttribute("data-onscroll-auto"),offset:n,distance:i,screen:u,speed:r.hasAttribute("data-onscroll-speed")?r.dataset.onscrollSpeed+" calculated at "+(1-parseFloat(r.dataset.onscrollSpeed))*(ScrollTrigger.maxScroll(window)-(this.scrollTrigger?this.scrollTrigger.start:0)):null,direction:r.hasAttribute("data-onscroll-direction")?r.dataset.onscrollDirection:"y",reverse:!!r.hasAttribute("data-onscroll-reverse"),trigger:s,triggerStart:c,triggerEnd:d,animateFrom:r.hasAttribute("data-onscroll-to")?JSON.parse(r.dataset.onscrollFrom):null,animateTo:r.hasAttribute("data-onscroll-to")?JSON.parse(r.dataset.onscrollTo):null}),console.groupEnd())})},this.elements=r.elements||"[data-onscroll]",this.screen=r.screen||"(min-width: 768px)",this.scrollTriggers=[],this.animationsData=[],this.init()}refresh(){ScrollTrigger.refresh()}restart(){this.stop(),ScrollTrigger.getAll().forEach(t=>t.kill()),ScrollTrigger.refresh(),this.init()}stop(t=null){if(t){const r=this.scrollTriggers.indexOf(t);-1!==r&&(this.animationsData[r].gsapAnimation.kill(),this.scrollTriggers.splice(r,1),this.animationsData.splice(r,1))}else this.animationsData.forEach(({gsapAnimation:t})=>{t.kill()}),this.scrollTriggers=[],this.animationsData=[]}}export{r as default};
//# sourceMappingURL=OnscrollDetection.modern.mjs.map
